<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Barang sebagai Nilai</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .emoji { font-size: 2.5rem; display: inline-block; margin: 0 6px; transition: transform 0.3s ease; }
    .emoji:hover { transform: scale(1.2); }
    .puzzle-box { background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #86efac; border-radius: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .pop-in { animation: popIn 0.3s ease-out; }
    @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    .button-press { transition: transform 0.1s, background-color 0.3s; }
    .button-press:active { transform: scale(0.95); }
    .game-card { transition: all 0.3s ease; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08); }
    .game-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.12); }
    .progress-bar { height: 10px; border-radius: 5px; background: #dcfce7; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #4ade80, #22c55e); transition: width 0.5s ease; }
  </style>
</head>
<body class="bg-gradient-to-br from-lime-50 to-green-100 min-h-screen flex flex-col items-center justify-center p-4 font-sans">

  <div id="intro" class="max-w-2xl w-full bg-white p-6 rounded-2xl shadow-xl border border-green-200 mb-6 game-card">
    <h2 class="text-2xl font-bold text-green-600 mb-4 text-center">Cara Bermain Barang sebagai Nilai</h2>
    <p class="text-gray-700 text-lg mb-4">Tebak nilai dari barang berdasarkan petunjuk matematika.</p>
    <div class="text-center mt-6">
      <button onclick="startGame()" class="bg-green-500 hover:bg-green-600 text-white text-lg font-bold px-8 py-3 rounded-full shadow-lg transform transition hover:scale-105 duration-300 button-press">
        <i class="fas fa-play mr-2"></i> Mulai Bermain
      </button>
    </div>
  </div>

  <div id="gameArea" class="hidden max-w-xl w-full">
    <div class="bg-white p-6 rounded-2xl shadow-xl border border-green-200 game-card">
      <div class="flex justify-between mb-4">
        <button onclick="backToIntro()" class="text-green-600 hover:underline font-semibold">
          <i class="fas fa-arrow-left mr-1"></i> Kembali
        </button>
        <div class="text-sm text-gray-600">
          XP: <span id="xp" class="font-bold">0</span> | Level: <span id="level" class="font-bold">1</span>
        </div>
      </div>

      <div class="mb-4">
        <div class="flex justify-between text-xs text-gray-500 mb-1">
          <span>Level Progress</span>
          <span><span id="currentXP">0</span>/20 XP</span>
        </div>
        <div class="progress-bar">
          <div id="xpProgress" class="progress-fill" style="width: 0%"></div>
        </div>
      </div>

      <div id="puzzleBox" class="puzzle-box p-5 text-center mb-6 text-xl font-bold space-y-4 fade-in"></div>

      <div class="text-center mb-4">
        <label class="block text-gray-600 font-semibold mb-1">Nilai dari <span id="targetLabel"></span> adalah:</label>
        <input type="number" id="userAnswer" class="text-center border-2 border-green-300 rounded-full px-4 py-3 w-32 text-xl font-bold" placeholder="?">
      </div>

      <div id="feedback" class="text-center text-lg font-bold hidden mb-4"></div>

      <div class="text-center">
        <button onclick="checkAnswer()" id="checkBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-3 rounded-full mr-2 button-press">Periksa Jawaban</button>
        <button onclick="nextPuzzle()" id="nextBtn" class="hidden bg-blue-500 hover:bg-blue-600 text-white font-bold px-6 py-3 rounded-full button-press">Soal Berikutnya</button>
      </div>
    </div>
  </div>

<script>
const items = ["üçî","üçü","üçï","üçé","üç©","üßÉ","üì¶","üß∏","‚öΩ","üìò"];
let xp = parseInt(localStorage.getItem("xp_barang")) || 0;
let level = 1;
let puzzle = {};

function startGame() {
  document.getElementById("intro").classList.add("hidden");
  document.getElementById("gameArea").classList.remove("hidden");
  generatePuzzle();
}

function backToIntro() {
  document.getElementById("gameArea").classList.add("hidden");
  document.getElementById("intro").classList.remove("hidden");
}

function getLevel() {
  return Math.floor(xp / 20) + 1;
}

function generatePuzzle() {
  level = getLevel();
  document.getElementById("level").textContent = level;
  document.getElementById("xp").textContent = xp;
  document.getElementById("currentXP").textContent = xp % 20;
  document.getElementById("xpProgress").style.width = ((xp % 20) / 20 * 100) + "%";

  const [a, b] = [...items].sort(() => Math.random() - 0.5);
  const va = Math.floor(Math.random() * 3 + 2);
  const vb = Math.floor(Math.random() * 3 + 1);
  let html = "";

  if (level <= 3) {
    html = `${a} = ${va} + ${vb}`;
    puzzle = { target: a, value: va + vb };
  } else if (level <= 6) {
    html = `${a} = ${va}<br>${b} + ${a} = ${va + vb}`;
    puzzle = { target: b, value: vb };
  } else {
    html = `${a} + ${b} = ${va + vb}<br>${b} = ${vb}`;
    puzzle = { target: a, value: va };
  }

  document.getElementById("puzzleBox").innerHTML = html;
  document.getElementById("targetLabel").textContent = puzzle.target;
  document.getElementById("userAnswer").value = '';
  document.getElementById("feedback").classList.add("hidden");
  document.getElementById("checkBtn").classList.remove("hidden");
  document.getElementById("nextBtn").classList.add("hidden");
}

function checkAnswer() {
  const guess = parseInt(document.getElementById("userAnswer").value);
  const feedback = document.getElementById("feedback");

  if (guess === puzzle.value) {
    xp += 10;
    localStorage.setItem("xp_barang", xp);
    feedback.textContent = "‚úÖ Benar! +10 XP";
    feedback.className = "text-center text-lg font-bold text-green-600 mb-4";
  } else {
    feedback.textContent = `‚ùå Salah. Jawaban: ${puzzle.value}`;
    feedback.className = "text-center text-lg font-bold text-red-600 mb-4";
  }

  feedback.classList.remove("hidden");
  document.getElementById("checkBtn").classList.add("hidden");
  document.getElementById("nextBtn").classList.remove("hidden");
}
</script>
</body>
</html>
